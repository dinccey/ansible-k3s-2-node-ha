# Only one primary instance
replicaCount: 1

# PostgreSQL auth (change passwords in production!)
auth:
  postgresPassword: "{{ postgres_postgres_password }}"
  database: "{{ postgres_database }}"
  username: "{{ postgres_username }}"
  password: "{{ postgres_password }}"

# Persistence with Longhorn (RWO volume; auto-reattach on failover)
primary:
  persistence:
    enabled: true
    storageClass: "longhorn"
    size: {{ postgres_primary_size }}

# No replicas needed
replica:
  replicaCount: 0
  persistence:
    enabled: false

# Resources (tuned for 2-node cluster)
resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Service (ClusterIP for Kite access)
service:
  type: ClusterIP
  port: 5432

# No replication config needed for single-node
postgresql:
  extendedConfiguration: |
    # keep minimal config, remove WAL streaming
    max_connections = 100
